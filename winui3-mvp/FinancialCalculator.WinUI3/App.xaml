<Application
    x:Class="FinancialCalculator.WinUI3.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:FinancialCalculator.WinUI3"
    xmlns:conv="using:FinancialCalculator.WinUI3.Converters"
    xmlns:muxc="using:Microsoft.UI.Xaml.Controls"
    xmlns:nf="using:Windows.Globalization.NumberFormatting">
    <Application.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <muxc:XamlControlsResources />
                <!-- Include the new style resource dictionaries -->
                <ResourceDictionary Source="Styles/DefaultStyles.xaml"/>
                <ResourceDictionary Source="Styles/ResponsiveStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
            <!-- MARK: Enhanced Theme Brushes with Animations -->
            <ResourceDictionary.ThemeDictionaries>
                <ResourceDictionary x:Key="Light">
                    <SolidColorBrush x:Key="CardBackgroundBrush" Color="#FFFFFFFF" Opacity="0.95" />
                    <SolidColorBrush x:Key="CardStrokeBrush" Color="#E0E0E0" />
                    <SolidColorBrush x:Key="PillBackgroundBrush" Color="#F5F5F5" />
                    <SolidColorBrush x:Key="PillStrokeBrush" Color="#D0D0D0" />
                    <SolidColorBrush x:Key="HighlightBrush" Color="#0078D4" Opacity="0.1" />
                    <SolidColorBrush x:Key="SuccessBrush" Color="#107C10" />
                    <SolidColorBrush x:Key="WarningBrush" Color="#FFB900" />
                    <SolidColorBrush x:Key="ErrorBrush" Color="#D83B01" />
                </ResourceDictionary>
                <ResourceDictionary x:Key="Dark">
                    <SolidColorBrush x:Key="CardBackgroundBrush" Color="#202020" Opacity="0.95" />
                    <SolidColorBrush x:Key="CardStrokeBrush" Color="#404040" />
                    <SolidColorBrush x:Key="PillBackgroundBrush" Color="#303030" />
                    <SolidColorBrush x:Key="PillStrokeBrush" Color="#505050" />
                    <SolidColorBrush x:Key="HighlightBrush" Color="#0078D4" Opacity="0.2" />
                    <SolidColorBrush x:Key="SuccessBrush" Color="#10A010" />
                    <SolidColorBrush x:Key="WarningBrush" Color="#FFD700" />
                    <SolidColorBrush x:Key="ErrorBrush" Color="#FF6B6B" />
                </ResourceDictionary>
            </ResourceDictionary.ThemeDictionaries>

            <!-- Converters -->
            <conv:StringEqualsToVisibilityConverter x:Key="StringEqualsToVisibilityConverter" />
            <conv:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter" />
            <conv:NullToBoolConverter x:Key="NullToBoolConverter" />

            <!-- MARK: Enhanced Card Container Style with Shadow -->
            <Style x:Key="CardContainerStyle" TargetType="Border">
                <Setter Property="Background" Value="{ThemeResource CardBackgroundBrush}" />
                <Setter Property="BorderBrush" Value="{ThemeResource CardStrokeBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="CornerRadius" Value="8" />
                <Setter Property="Padding" Value="16" />
                <!-- Translation cannot be set in a Setter as it's not a DependencyProperty -->
                <Setter Property="Shadow">
                    <Setter.Value>
                        <ThemeShadow />
                    </Setter.Value>
                </Setter>
                <Setter Property="Transitions">
                    <Setter.Value>
                        <TransitionCollection>
                            <EntranceThemeTransition/>
                        </TransitionCollection>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- MARK: Pill Style (for IDC auto/override indicator) -->
            <Style x:Key="PillBorderStyle" TargetType="Border">
                <Setter Property="Background" Value="{ThemeResource PillBackgroundBrush}" />
                <Setter Property="BorderBrush" Value="{ThemeResource PillStrokeBrush}" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="CornerRadius" Value="16" />
                <Setter Property="Padding" Value="6,2" />
                <Setter Property="Margin" Value="4,0,0,0" />
                <Setter Property="VerticalAlignment" Value="Center" />
            </Style>

            <!-- MARK: Enhanced Input Defaults with Hover Effects -->
            <Style TargetType="TextBox">
                <Setter Property="CornerRadius" Value="6" />
                <Setter Property="MinWidth" Value="96" />
                <Setter Property="Margin" Value="4,0,0,0" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="8,6,8,6" />
                <Setter Property="PlaceholderForeground" Value="{ThemeResource TextControlPlaceholderForeground}" />
            </Style>

            <Style TargetType="ComboBox">
                <Setter Property="CornerRadius" Value="6" />
                <Setter Property="MinWidth" Value="120" />
                <Setter Property="Margin" Value="4,0,0,0" />
                <Setter Property="BorderThickness" Value="1" />
                <Setter Property="Padding" Value="8,6,32,6" />
            </Style>

            <Style TargetType="Button">
                <Setter Property="CornerRadius" Value="6" />
                <Setter Property="Margin" Value="6,0,0,0" />
                <Setter Property="Padding" Value="10,6,10,6" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="MinWidth" Value="80" />
            </Style>

            <!-- Enhanced Button Hover Style -->
            <Style x:Key="HoverButtonStyle" TargetType="Button">
                <Setter Property="CornerRadius" Value="6" />
                <Setter Property="Margin" Value="6,0,0,0" />
                <Setter Property="Padding" Value="10,6,10,6" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="MinWidth" Value="80" />
                <Setter Property="Background" Value="{ThemeResource ButtonBackground}" />
                <Setter Property="Transitions">
                    <Setter.Value>
                        <TransitionCollection>
                            <RepositionThemeTransition />
                        </TransitionCollection>
                    </Setter.Value>
                </Setter>
            </Style>

            <!-- Numeric formatters -->
            <nf:DecimalFormatter x:Key="GroupedZeroFormatter" IsGrouped="True" FractionDigits="0" />
            <nf:DecimalFormatter x:Key="GroupedTwoFormatter" IsGrouped="True" FractionDigits="2" />

            <!-- Shared widths for consistent alignment -->
            <x:Double x:Key="UnitColumnWidthValue">72</x:Double>
            <x:Double x:Key="InputColumnWidthValue">288</x:Double>
            <x:Double x:Key="ValueAreaWidth">360</x:Double>

            <!-- MARK: Typography helpers -->
            <Style x:Key="CardHeaderTextStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="18" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Margin" Value="0,0,0,8" />
            </Style>
            <Style x:Key="SectionHeaderTextStyle" TargetType="TextBlock">
                <Setter Property="FontSize" Value="16" />
                <Setter Property="FontWeight" Value="SemiBold" />
                <Setter Property="Margin" Value="0,0,8,0" />
                <Setter Property="VerticalAlignment" Value="Center" />
            </Style>
            <Style x:Key="LabelTextStyle" TargetType="TextBlock">
                <Setter Property="Opacity" Value="0.78" />
                <Setter Property="VerticalAlignment" Value="Center" />
            </Style>

            <!-- Enhanced Validation/Error text style with Icon -->
            <Style x:Key="ErrorTextStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{ThemeResource ErrorBrush}" />
                <Setter Property="Margin" Value="0,8,0,0" />
                <Setter Property="TextWrapping" Value="Wrap" />
                <Setter Property="FontSize" Value="13" />
            </Style>

            <!-- Success text style -->
            <Style x:Key="SuccessTextStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{ThemeResource SuccessBrush}" />
                <Setter Property="Margin" Value="0,8,0,0" />
                <Setter Property="TextWrapping" Value="Wrap" />
                <Setter Property="FontSize" Value="13" />
            </Style>

            <!-- Warning text style -->
            <Style x:Key="WarningTextStyle" TargetType="TextBlock">
                <Setter Property="Foreground" Value="{ThemeResource WarningBrush}" />
                <Setter Property="Margin" Value="0,8,0,0" />
                <Setter Property="TextWrapping" Value="Wrap" />
                <Setter Property="FontSize" Value="13" />
            </Style>

            <!-- Loading Indicator Template -->
            <DataTemplate x:Key="LoadingTemplate">
                <Grid Background="{ThemeResource SystemControlBackgroundAltMediumLowBrush}">
                    <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center" Spacing="12">
                        <ProgressRing IsActive="True" Width="48" Height="48" />
                        <TextBlock Text="Calculating..." HorizontalAlignment="Center" />
                    </StackPanel>
                </Grid>
            </DataTemplate>
        </ResourceDictionary>
    </Application.Resources>
</Application>
